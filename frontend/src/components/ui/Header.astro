---
const path = Astro.url.pathname;
const is = (href: string) => path === href;

// Links del menú: más grandes y bold
const baseLink =
  'flex items-center lg:w-auto justify-center gap-2 lg:px-4 lg:py-2 hover:bg-white/5 lg:rounded-2xl border border-transparent hover:border-white/10 transition-all min-h-[50px] px-5 py-2 duration-300 text-base lg:text-lg font-semibold';

type IconKey = 'about' | 'work' | 'projects' | 'blog' | 'contact';

interface NavLink {
  href: string;
  label: string;
  icon: IconKey;
}

const navLinks: NavLink[] = [
  { href: '#about', label: 'Sobre mí', icon: 'about' },
  { href: '#work', label: 'Trabajos', icon: 'work' },
  { href: '/projects', label: 'Proyectos', icon: 'projects' },
  { href: '/blog', label: 'Blog', icon: 'blog' },
  { href: '/contacto', label: 'Contáctame', icon: 'contact' },
];

const linkClass = (href: string, extra: string = '') =>
  `${baseLink} ${extra} ${is(href) ? 'text-white' : 'text-white/90'}`;
---

<header class="sticky top-0 z-30">
  <div
    class="border-b border-white/5 bg-gradient-to-b from-black/85 via-black/60 to-transparent backdrop-blur"
  >
    <div class="container mx-auto px-1 py-2 lg:py-3">
      {/* Toggle para menú mobile/tablet */}
      <input id="nav-toggle" type="checkbox" class="peer hidden" />

      <div
        class="flex items-center justify-between gap-4 min-h-[64px] lg:min-h-[80px]"
      >
        {/* Logo + nombre */}
        <a
          href="/"
          class="ml-0 flex items-center gap-3 font-bold transition-transform duration-300 hover:scale-110"
        >
          <span
            class="grid h-10 w-10 place-items-center rounded-2xl bg-gradient-to-tr from-sky-500 to-blue-600 text-sm font-extrabold text-white shadow-lg shadow-sky-500/40"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke-width="1.5"
              stroke="currentColor"
              class="h-6 w-6"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"
              />
            </svg>
          </span>

          <span class="text-xl lg:text-2xl font-bold tracking-tight text-white">
            rnavarrete
          </span>
        </a>

        {/* Navegación centrada (solo escritorio >= 1024px) */}
        <nav class="hidden lg:flex flex-1 justify-center">
          <ul class="flex items-center gap-2 lg:gap-3">
            {navLinks.map((link) => (
              <li>
                <a href={link.href} class={linkClass(link.href)}>
                  <span class="flex items-center gap-2">
                    {link.icon === 'about' && (
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke-width="1.5"
                        stroke="currentColor"
                        class="h-5 w-5 text-sky-400"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"
                        />
                      </svg>
                    )}
                    {link.icon === 'work' && (
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke-width="1.5"
                        stroke="currentColor"
                        class="h-5 w-5 text-sky-400"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          d="M9 5.25A2.25 2.25 0 0 1 11.25 3h1.5A2.25 2.25 0 0 1 15 5.25V6h3.75A2.25 2.25 0 0 1 21 8.25v9A2.25 2.25 0 0 1 18.75 19.5H5.25A2.25 2.25 0 0 1 3 17.25v-9A2.25 2.25 0 0 1 5.25 6H9v-.75Zm1.5.75h3v-.75a.75.75 0 0 0-.75-.75h-1.5a.75.75 0 0 0-.75.75V6Zm0 4.5v3h3v-3h-3Z"
                        />
                      </svg>
                    )}
                    {link.icon === 'projects' && (
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke-width="1.5"
                        stroke="currentColor"
                        class="h-5 w-5 text-sky-400"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          d="M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z"
                        />
                      </svg>
                    )}
                    {link.icon === 'blog' && (
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke-width="1.5"
                        stroke="currentColor"
                        class="h-5 w-5 text-sky-400"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0M3.124 7.5A8.969 8.969 0 0 1 5.292 3m13.416 0a8.969 8.969 0 0 1 2.168 4.5"
                        />
                      </svg>
                    )}
                    {link.icon === 'contact' && (
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke-width="1.5"
                        stroke="currentColor"
                        class="h-5 w-5 text-sky-400"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          d="M21.75 6.75v10.5a1.5 1.5 0 0 1-1.5 1.5h-16.5a1.5 1.5 0 0 1-1.5-1.5V6.75m19.5 0A1.5 1.5 0 0 0 20.25 5.25h-16.5a1.5 1.5 0 0 0-1.5 1.5m19.5 0v.243a1.5 1.5 0 0 1-.553 1.154l-7.5 6.375a1.5 1.5 0 0 1-1.894 0l-7.5-6.375A1.5 1.5 0 0 1 2.25 6.993V6.75"
                        />
                      </svg>
                    )}
                    <span class="whitespace-nowrap">{link.label}</span>
                  </span>
                </a>
              </li>
            ))}
          </ul>
        </nav>

        {/* Login + mobile controls */}
        <div class="flex items-center gap-3">
          {/* Iniciar sesión desktop completo (solo >= xl) */}
          <div class="hidden xl:flex items-center">
            <a
              href="/login"
              class={`inline-flex items-center gap-3 rounded-2xl px-5 py-2 text-base lg:text-lg font-semibold
                border border-transparent text-white/90 hover:text-white hover:bg-white/5 hover:border-white/10
                transition-all duration-300
                ${
                  is('/login')
                    ? 'border-white/40 bg-white/5'
                    : ''
                }`}
            >
              <span
                class="grid h-11 w-11 place-items-center rounded-2xl bg-gradient-to-tr from-sky-500 to-blue-600 text-sm font-extrabold text-white shadow-lg shadow-sky-500/40"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="h-7 w-7 lg:h-8 lg:w-8 text-white"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"
                  />
                </svg>
              </span>

              <span>Iniciar sesión</span>
            </a>
          </div>

          {/* Login solo icono en mobile + tablet (< xl) */}
          <a
            href="/login"
            class="flex xl:hidden items-center justify-center h-10 w-10 rounded-2xl bg-gradient-to-tr from-sky-500 to-blue-600 text-white shadow-lg shadow-sky-500/40"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke-width="1.5"
              stroke="currentColor"
              class="h-6 w-6"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"
              />
            </svg>
          </a>

          {/* Hamburguesa mobile + tablet (< lg) */}
          <label
            for="nav-toggle"
            class="flex lg:hidden h-10 w-10 items-center justify-center rounded-2xl border border-white/20 hover:bg-white/5 hover:border-white/40 transition-all duration-200 cursor-pointer"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke-width="1.5"
              stroke="currentColor"
              class="h-6 w-6 text-white"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M3.75 6.75h16.5M3.75 12h16.5m-9 5.25h9"
              />
            </svg>
          </label>
        </div>
      </div>

      {/* Menú mobile/tablet */}
      <nav
        class="lg:hidden max-h-0 overflow-hidden transition-all duration-300 peer-checked:max-h-[500px] mt-3"
      >
        <ul class="flex flex-col gap-1">
          {navLinks.map((link) => (
            <li>
              <a
                href={link.href}
                class={linkClass(link.href, 'w-full justify-start')}
              >
                <span class="flex items-center gap-2">
                  {link.icon === 'about' && (
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke-width="1.5"
                      stroke="currentColor"
                      class="h-5 w-5 text-sky-400"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"
                      />
                    </svg>
                  )}
                  {link.icon === 'work' && (
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke-width="1.5"
                      stroke="currentColor"
                      class="h-5 w-5 text-sky-400"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M9 5.25A2.25 2.25 0 0 1 11.25 3h1.5A2.25 2.25 0 0 1 15 5.25V6h3.75A2.25 2.25 0 0 1 21 8.25v9A2.25 2.25 0 0 1 18.75 19.5H5.25A2.25 2.25 0 0 1 3 17.25v-9A2.25 2.25 0 0 1 5.25 6H9v-.75Zm1.5.75h3v-.75a.75.75 0 0 0-.75-.75h-1.5a.75.75 0 0 0-.75.75V6Zm0 4.5v3h3v-3h-3Z"
                      />
                    </svg>
                  )}
                  {link.icon === 'projects' && (
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke-width="1.5"
                      stroke="currentColor"
                      class="h-5 w-5 text-sky-400"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z"
                      />
                    </svg>
                  )}
                  {link.icon === 'blog' && (
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke-width="1.5"
                      stroke="currentColor"
                      class="h-5 w-5 text-sky-400"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0M3.124 7.5A8.969 8.969 0 0 1 5.292 3m13.416 0a8.969 8.969 0 0 1 2.168 4.5"
                      />
                    </svg>
                  )}
                  {link.icon === 'contact' && (
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke-width="1.5"
                      stroke="currentColor"
                      class="h-5 w-5 text-sky-400"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M21.75 6.75v10.5a1.5 1.5 0 0 1-1.5 1.5h-16.5a1.5 1.5 0 0 1-1.5-1.5V6.75m19.5 0A1.5 1.5 0 0 0 20.25 5.25h-16.5a1.5 1.5 0 0 0-1.5 1.5m19.5 0v.243a1.5 1.5 0 0 1-.553 1.154l-7.5 6.375a1.5 1.5 0 0 1-1.894 0l-7.5-6.375A1.5 1.5 0 0 1 2.25 6.993V6.75"
                      />
                    </svg>
                  )}
                  <span class="whitespace-nowrap">{link.label}</span>
                </span>
              </a>
            </li>
          ))}
        </ul>
      </nav>
    </div>
  </div>
</header>
